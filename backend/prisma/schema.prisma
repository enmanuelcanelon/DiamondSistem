generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model vendedores {
  id                  Int       @id @default(autoincrement())
  nombre_completo     String    @db.VarChar(255)
  codigo_vendedor     String    @unique @db.VarChar(50)
  email               String    @unique @db.VarChar(255)
  telefono            String?   @db.VarChar(20)
  password_hash       String    @db.VarChar(255)
  comision_porcentaje Decimal?  @default(10.00) @db.Decimal(5, 2)
  total_ventas        Decimal?  @default(0.00) @db.Decimal(10, 2)
  total_comisiones    Decimal?  @default(0.00) @db.Decimal(10, 2)
  activo              Boolean?  @default(true)
  fecha_registro      DateTime? @default(now()) @db.Timestamp(6)
  fecha_actualizacion DateTime? @default(now()) @db.Timestamp(6)

  // Relaciones
  clientes                clientes[]
  ofertas                 ofertas[]
  contratos               contratos[]
  versiones_contratos_pdf versiones_contratos_pdf[]
  solicitudes_cliente     solicitudes_cliente[]     @relation("respondido_por")
}

model clientes {
  id                  Int      @id @default(autoincrement())
  nombre_completo     String   @db.VarChar(255)
  email               String   @db.VarChar(255)
  telefono            String   @db.VarChar(20)
  direccion           String?
  como_nos_conocio    String?  @db.VarChar(255)
  tipo_evento         String?  @db.VarChar(100)
  vendedor_id         Int?
  fecha_registro      DateTime @default(now())
  fecha_actualizacion DateTime @default(now())

  // Relaciones
  vendedores          vendedores?           @relation(fields: [vendedor_id], references: [id])
  ofertas             ofertas[]
  contratos           contratos[]
  solicitudes_cliente solicitudes_cliente[]

  @@index([vendedor_id], map: "idx_clientes_vendedor")
  @@index([vendedor_id, tipo_evento], map: "idx_clientes_vendedor_tipo")
  @@index([email], map: "idx_clientes_email")
}

model temporadas {
  id            Int      @id @default(autoincrement())
  nombre        String   @db.VarChar(50)
  meses         String   @db.VarChar(255)
  ajuste_precio Decimal  @db.Decimal(10, 2)
  descripcion   String?
  activo        Boolean? @default(true)

  // Relaciones
  ofertas ofertas[]
}

model salones {
  id               Int                @id @default(autoincrement())
  nombre           String             @unique @db.VarChar(100)
  capacidad_maxima Int
  descripcion      String?
  pisos_torta      Int?               @default(3)
  activo           Boolean?           @default(true)
  fecha_creacion   DateTime?          @default(now()) @db.Timestamp(6)
  contratos        contratos[]
  ofertas          ofertas[]
  paquetes_salones paquetes_salones[]
}

model paquetes_salones {
  id               Int       @id @default(autoincrement())
  paquete_id       Int?
  salon_id         Int?
  precio_base      Decimal   @db.Decimal(10, 2)
  invitados_minimo Int
  disponible       Boolean?  @default(true)
  paquetes         paquetes? @relation(fields: [paquete_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  salones          salones?  @relation(fields: [salon_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([paquete_id, salon_id])
  @@index([disponible], map: "idx_paquetes_salones_disponible")
}

model paquetes {
  id                 Int       @id @default(autoincrement())
  nombre             String    @db.VarChar(100)
  precio_base        Decimal   @db.Decimal(10, 2)
  duracion_horas     Int
  invitados_minimo   Int?
  dias_disponibles   String?   @db.VarChar(100)
  horario_inicio     DateTime? @default(dbgenerated("'10:00:00'::time without time zone")) @db.Time(6)
  horario_fin_base   DateTime? @default(dbgenerated("'01:00:00'::time without time zone")) @db.Time(6)
  horario_fin_maximo DateTime? @default(dbgenerated("'02:00:00'::time without time zone")) @db.Time(6)
  descripcion        String?
  es_personalizable  Boolean?  @default(false)
  activo             Boolean?  @default(true)
  fecha_creacion     DateTime? @default(now()) @db.Timestamp(6)

  // Relaciones
  paquetes_salones   paquetes_salones[]
  paquetes_servicios paquetes_servicios[]
  ofertas            ofertas[]
  contratos          contratos[]
}

model servicios {
  id                   Int       @id @default(autoincrement())
  nombre               String    @db.VarChar(255)
  descripcion          String?
  precio_base          Decimal   @db.Decimal(10, 2)
  tipo_cobro           String?   @default("fijo") @db.VarChar(50)
  categoria            String?   @db.VarChar(100)
  requiere_seleccion   Boolean?  @default(false)
  opciones_disponibles String?
  activo               Boolean?  @default(true)
  fecha_creacion       DateTime? @default(now()) @db.Timestamp(6)

  // Relaciones
  paquetes_servicios            paquetes_servicios[]
  ofertas_servicios_adicionales ofertas_servicios_adicionales[]
  contratos_servicios           contratos_servicios[]
  solicitudes_cliente           solicitudes_cliente[]
}

model paquetes_servicios {
  id              Int        @id @default(autoincrement())
  paquete_id      Int?
  servicio_id     Int?
  cantidad        Int?       @default(1)
  incluido_gratis Boolean?   @default(true)
  notas           String?
  paquetes        paquetes?  @relation(fields: [paquete_id], references: [id])
  servicios       servicios? @relation(fields: [servicio_id], references: [id])

  @@unique([paquete_id, servicio_id])
}

model ofertas {
  id                         Int       @id @default(autoincrement())
  codigo_oferta              String    @unique @db.VarChar(50)
  cliente_id                 Int?
  vendedor_id                Int?
  paquete_id                 Int?
  fecha_evento               DateTime  @db.Date
  hora_inicio                DateTime  @db.Time(6)
  hora_fin                   DateTime  @db.Time(6)
  cantidad_invitados         Int
  temporada_id               Int?
  precio_paquete_base        Decimal   @db.Decimal(10, 2)
  ajuste_temporada           Decimal?  @default(0.00) @db.Decimal(10, 2)
  subtotal_servicios         Decimal?  @default(0.00) @db.Decimal(10, 2)
  subtotal                   Decimal   @db.Decimal(10, 2)
  descuento                  Decimal?  @default(0.00) @db.Decimal(10, 2)
  impuesto_porcentaje        Decimal?  @default(7.00) @db.Decimal(5, 2)
  impuesto_monto             Decimal   @db.Decimal(10, 2)
  tarifa_servicio_porcentaje Decimal?  @default(18.00) @db.Decimal(5, 2)
  tarifa_servicio_monto      Decimal   @db.Decimal(10, 2)
  total_final                Decimal   @db.Decimal(10, 2)
  estado                     String?   @default("pendiente") @db.VarChar(50)
  motivo_rechazo             String?
  notas_vendedor             String?
  fecha_creacion             DateTime? @default(now()) @db.Timestamp(6)
  fecha_actualizacion        DateTime? @default(now()) @db.Timestamp(6)
  fecha_respuesta            DateTime? @db.Timestamp(6)
  lugar_evento               String?   @db.VarChar(255)
  salon_id                   Int?
  lugar_salon                String?   @db.VarChar(100)
  photobooth_tipo            String?   @db.VarChar(50)
  homenajeado                String?   @db.VarChar(200)

  // Relaciones
  clientes                      clientes?                       @relation(fields: [cliente_id], references: [id])
  vendedores                    vendedores?                     @relation(fields: [vendedor_id], references: [id])
  paquetes                      paquetes?                       @relation(fields: [paquete_id], references: [id])
  temporadas                    temporadas?                     @relation(fields: [temporada_id], references: [id])
  salones                       salones?                        @relation(fields: [salon_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  contratos                     contratos[]
  ofertas_servicios_adicionales ofertas_servicios_adicionales[]

  @@index([salon_id], map: "idx_ofertas_salon")
  @@index([vendedor_id, estado], map: "idx_ofertas_vendedor_estado")
  @@index([vendedor_id, fecha_evento], map: "idx_ofertas_vendedor_fecha")
  @@index([cliente_id, estado], map: "idx_ofertas_cliente_estado")
}

model ofertas_servicios_adicionales {
  id              Int       @id @default(autoincrement())
  oferta_id       Int?
  servicio_id     Int?
  cantidad        Int?      @default(1)
  precio_unitario Decimal   @db.Decimal(10, 2)
  precio_original Decimal   @db.Decimal(10, 2)
  subtotal        Decimal   @db.Decimal(10, 2)
  notas           String?
  fecha_agregado  DateTime? @default(now()) @db.Timestamp(6)

  // Relaciones
  ofertas   ofertas?   @relation(fields: [oferta_id], references: [id])
  servicios servicios? @relation(fields: [servicio_id], references: [id])
}

model contratos {
  id                    Int       @id @default(autoincrement())
  codigo_contrato       String    @unique @db.VarChar(50)
  oferta_id             Int?
  cliente_id            Int?
  vendedor_id           Int?
  paquete_id            Int?
  fecha_evento          DateTime  @db.Date
  hora_inicio           DateTime  @db.Time(6)
  hora_fin              DateTime  @db.Time(6)
  cantidad_invitados    Int
  total_contrato        Decimal   @db.Decimal(10, 2)
  tipo_pago             String    @db.VarChar(50)
  meses_financiamiento  Int?      @default(1)
  pago_mensual          Decimal?  @db.Decimal(10, 2)
  total_pagado          Decimal?  @default(0.00) @db.Decimal(10, 2)
  saldo_pendiente       Decimal   @db.Decimal(10, 2)
  estado_pago           String?   @default("pendiente") @db.VarChar(50)
  codigo_acceso_cliente String    @unique @db.VarChar(100)
  estado                String?   @default("activo") @db.VarChar(50)
  fecha_firma           DateTime? @default(now()) @db.Timestamp(6)
  fecha_actualizacion   DateTime? @default(now()) @db.Timestamp(6)
  terminos_aceptados    Boolean?  @default(true)
  comision_calculada    Decimal?  @db.Decimal(10, 2)
  comision_pagada       Boolean?  @default(false)
  numero_plazos         Int?
  plan_pagos            Json?
  salon_id              Int?
  lugar_salon           String?   @db.VarChar(100)
  photobooth_tipo       String?   @db.VarChar(50)
  homenajeado           String?   @db.VarChar(200)
  notas_vendedor        String?

  // Relaciones
  ofertas                      ofertas?                       @relation(fields: [oferta_id], references: [id])
  clientes                     clientes?                      @relation(fields: [cliente_id], references: [id])
  vendedores                   vendedores?                    @relation(fields: [vendedor_id], references: [id])
  paquetes                     paquetes?                      @relation(fields: [paquete_id], references: [id])
  salones                      salones?                       @relation(fields: [salon_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  contratos_servicios          contratos_servicios[]
  pagos                        pagos[]
  eventos                      eventos?
  solicitudes_cliente          solicitudes_cliente[]
  ajustes_evento               ajustes_evento?
  versiones_contratos_pdf      versiones_contratos_pdf[]
  invitados                    invitados[]
  mesas                        mesas[]
  playlist_canciones           playlist_canciones[]
  mensajes                     mensajes[]
  checklist_servicios_externos checklist_servicios_externos[]

  @@index([salon_id], map: "idx_contratos_salon")
  @@index([tipo_pago], map: "idx_contratos_tipo_pago")
  @@index([vendedor_id, estado_pago], map: "idx_contratos_vendedor_estado_pago")
  @@index([vendedor_id, fecha_evento], map: "idx_contratos_vendedor_fecha")
  @@index([cliente_id, estado_pago], map: "idx_contratos_cliente_estado_pago")
  @@index([codigo_acceso_cliente], map: "idx_contratos_codigo_acceso")
}

model contratos_servicios {
  id                  Int        @id @default(autoincrement())
  contrato_id         Int?
  servicio_id         Int?
  cantidad            Int?       @default(1)
  precio_unitario     Decimal    @db.Decimal(10, 2)
  subtotal            Decimal    @db.Decimal(10, 2)
  incluido_en_paquete Boolean?   @default(false)
  fecha_agregado      DateTime?  @default(now()) @db.Timestamp(6)
  servicios           servicios? @relation(fields: [servicio_id], references: [id])
  contratos           contratos? @relation(fields: [contrato_id], references: [id])
}

model pagos {
  id                Int        @id @default(autoincrement())
  contrato_id       Int?
  monto             Decimal    @db.Decimal(10, 2)
  metodo_pago       String?    @db.VarChar(50)
  tipo_tarjeta      String?    @db.VarChar(50)
  recargo_tarjeta   Decimal?   @default(0.00) @db.Decimal(10, 2)
  monto_total       Decimal    @db.Decimal(10, 2)
  numero_referencia String?    @db.VarChar(100)
  estado            String?    @default("completado") @db.VarChar(50)
  notas             String?
  fecha_pago        DateTime?  @default(now()) @db.Timestamp(6)
  registrado_por    Int?
  contratos         contratos? @relation(fields: [contrato_id], references: [id])

  @@index([contrato_id], map: "idx_pagos_contrato")
  @@index([contrato_id, estado], map: "idx_pagos_contrato_estado")
  @@index([fecha_pago], map: "idx_pagos_fecha")
}

model eventos {
  id                             Int        @id @default(autoincrement())
  contrato_id                    Int?       @unique
  cliente_id                     Int?
  nombre_evento                  String     @db.VarChar(255)
  fecha_evento                   DateTime   @db.Date
  hora_inicio                    DateTime   @db.Time(6)
  hora_fin                       DateTime   @db.Time(6)
  cantidad_invitados_confirmados Int?
  estado                         String?    @default("en_proceso") @db.VarChar(50)
  detalles_comida                String?
  detalles_bebidas               String?
  detalles_decoracion            String?
  detalles_musica                String?
  seating_chart                  String?
  instrucciones_especiales       String?
  fecha_creacion                 DateTime?  @default(now()) @db.Timestamp(6)
  fecha_actualizacion            DateTime?  @default(now()) @db.Timestamp(6)
  fecha_finalizacion             DateTime?  @db.Timestamp(6)
  contratos                      contratos? @relation(fields: [contrato_id], references: [id])
}

model solicitudes_cliente {
  id                    Int       @id @default(autoincrement())
  contrato_id           Int?
  cliente_id            Int?
  tipo_solicitud        String    @db.VarChar(50)
  invitados_adicionales Int?
  servicio_id           Int?
  cantidad_servicio     Int?
  detalles_solicitud    String?
  costo_adicional       Decimal?  @db.Decimal(10, 2)
  estado                String?   @default("pendiente") @db.VarChar(50)
  motivo_rechazo        String?
  fecha_solicitud       DateTime? @default(now()) @db.Timestamp(6)
  fecha_respuesta       DateTime? @db.Timestamp(6)
  respondido_por        Int?

  // Relaciones
  contratos  contratos?  @relation(fields: [contrato_id], references: [id])
  clientes   clientes?   @relation(fields: [cliente_id], references: [id])
  servicios  servicios?  @relation(fields: [servicio_id], references: [id])
  vendedores vendedores? @relation("respondido_por", fields: [respondido_por], references: [id])
}

model mensajes {
  id                Int       @id @default(autoincrement())
  contrato_id       Int?
  remitente_tipo    String    @db.VarChar(50)
  remitente_id      Int
  destinatario_tipo String    @db.VarChar(50)
  destinatario_id   Int
  mensaje           String
  leido             Boolean?  @default(false)
  fecha_envio       DateTime? @default(now()) @db.Timestamp(6)
  fecha_lectura     DateTime? @db.Timestamp(6)
  tipo_remitente    String?   @default("vendedor") @db.VarChar(20)

  // Relaciones
  contratos contratos? @relation(fields: [contrato_id], references: [id])
}

model configuracion_sistema {
  id                  Int      @id @default(autoincrement())
  clave               String   @unique @db.VarChar(100)
  valor               String
  tipo                String?  @db.VarChar(50)
  descripcion         String?
  fecha_actualizacion DateTime @default(now())
}

model historial_cambios_precios {
  id              Int       @id @default(autoincrement())
  oferta_id       Int?
  contrato_id     Int?
  tipo_entidad    String?   @db.VarChar(50)
  entidad_id      Int?
  precio_original Decimal   @db.Decimal(10, 2)
  precio_nuevo    Decimal   @db.Decimal(10, 2)
  motivo          String?
  modificado_por  Int?
  fecha_cambio    DateTime? @default(now()) @db.Timestamp(6)
}

model versiones_contratos_pdf {
  id                 Int       @id @default(autoincrement())
  contrato_id        Int
  version_numero     Int
  total_contrato     Decimal   @db.Decimal(10, 2)
  cantidad_invitados Int?
  motivo_cambio      String?
  cambios_detalle    Json?
  pdf_contenido      Bytes?
  generado_por       Int?
  fecha_generacion   DateTime? @default(now()) @db.Timestamp(6)

  // Relaciones
  contratos  contratos   @relation(fields: [contrato_id], references: [id])
  vendedores vendedores? @relation(fields: [generado_por], references: [id])

  @@unique([contrato_id, version_numero])
}

model mesas {
  id             Int       @id @default(autoincrement())
  contrato_id    Int
  numero_mesa    Int
  capacidad      Int       @default(10)
  nombre_mesa    String?   @db.VarChar(100)
  notas          String?
  fecha_creacion DateTime? @default(now()) @db.Timestamp(6)

  // Relaciones
  contratos contratos   @relation(fields: [contrato_id], references: [id], onDelete: Cascade)
  invitados invitados[]

  @@unique([contrato_id, numero_mesa])
  @@index([contrato_id], map: "idx_mesas_contrato")
}

model invitados {
  id                         Int        @id @default(autoincrement())
  contrato_id                Int
  nombre_completo            String     @db.VarChar(255)
  email                      String?    @db.VarChar(255)
  telefono                   String?    @db.VarChar(20)
  tipo                       String?    @default("adulto") @db.VarChar(50)
  mesa_id                    Int?
  confirmado                 Boolean?   @default(false)
  asistira                   Boolean?
  restricciones_alimentarias String?
  notas                      String?
  fecha_creacion             DateTime?  @default(now()) @db.Timestamp(6)
  fecha_actualizacion        DateTime?  @default(now()) @db.Timestamp(6)
  contratos                  contratos? @relation(fields: [contrato_id], references: [id])
  mesas                      mesas?     @relation(fields: [mesa_id], references: [id])

  @@index([contrato_id], map: "idx_invitados_contrato")
  @@index([contrato_id, mesa_id], map: "idx_invitados_contrato_mesa")
  @@index([mesa_id], map: "idx_invitados_mesa")
}

model playlist_canciones {
  id                  Int        @id @default(autoincrement())
  contrato_id         Int
  titulo              String     @db.VarChar(255)
  artista             String?    @db.VarChar(255)
  genero              String?    @db.VarChar(100)
  categoria           String?    @default("favorita") @db.VarChar(50)
  notas               String?
  orden               Int?
  reproducida         Boolean?   @default(false)
  agregado_por        String?    @default("cliente") @db.VarChar(50)
  fecha_creacion      DateTime?  @default(now()) @db.Timestamp(6)
  fecha_actualizacion DateTime?  @default(now()) @db.Timestamp(6)
  contratos           contratos? @relation(fields: [contrato_id], references: [id])
}

model ajustes_evento {
  id                          Int        @id @default(autoincrement())
  contrato_id                 Int        @unique
  sabor_torta                 String?    @db.VarChar(100)
  tamano_torta                String?    @db.VarChar(50)
  tipo_relleno                String?    @db.VarChar(100)
  diseno_torta                String?
  notas_torta                 String?
  estilo_decoracion           String?    @db.VarChar(100)
  colores_principales         String?
  flores_preferidas           String?    @db.VarChar(255)
  tematica                    String?    @db.VarChar(100)
  notas_decoracion            String?
  tipo_servicio               String?    @db.VarChar(50)
  entrada                     String?    @db.VarChar(255)
  plato_principal             String?    @db.VarChar(255)
  acompanamientos             String?
  opciones_vegetarianas       String?
  opciones_veganas            String?
  restricciones_alimentarias  String?
  bebidas_incluidas           String?
  notas_menu                  String?
  musica_ceremonial           String?    @db.VarChar(255)
  primer_baile                String?    @db.VarChar(255)
  baile_padre_hija            String?    @db.VarChar(255)
  baile_madre_hijo            String?    @db.VarChar(255)
  hora_show                   String?    @db.VarChar(50)
  actividades_especiales      String?
  bailes_adicionales          String? // JSON string para almacenar array de bailes
  cancion_sorpresa            String?    @db.VarChar(255)
  notas_entretenimiento       String?
  playlist_urls               Json?      // Array de URLs de playlists externas (YouTube/Spotify)
  momentos_especiales         String?
  poses_especificas           String?
  ubicaciones_fotos           String?
  notas_fotografia            String?
  invitado_honor              String?    @db.VarChar(255)
  brindis_especial            String?    @db.VarChar(255)
  sorpresas_planeadas         String?
  solicitudes_especiales      String?
  vestido_nina                String?    @db.VarChar(500)
  observaciones_adicionales   String?
  items_especiales            String?
  protocolo                   String?
  porcentaje_completado       Int        @default(0)
  fecha_creacion              DateTime   @default(now())
  fecha_actualizacion         DateTime   @default(now())
  tipo_decoracion             String?    @db.VarChar(50)
  cojines_color               String?    @db.VarChar(50)
  centro_mesa_1               String?    @db.VarChar(50)
  centro_mesa_2               String?    @db.VarChar(50)
  centro_mesa_3               String?    @db.VarChar(50)
  base_color                  String?    @db.VarChar(50)
  challer_color               String?    @db.VarChar(50)
  servilletas                 Json?
  aros_color                  String?    @db.VarChar(50)
  aros_nota                   String?
  runner_tipo                 String?    @db.VarChar(50)
  runner_nota                 String?
  stage_tipo                  String?    @db.VarChar(50)
  stage_color_globos          String?    @db.VarChar(100)
  decoracion_premium_detalles String?
  decoracion_completada       Boolean?   @default(false)
  estilo_decoracion_otro      String?
  hora_limosina               DateTime?  @db.Time(6)
  pisos_torta                 Int?
  sabor_otro                  String?    @db.VarChar(100)
  diseno_otro                 String?    @db.VarChar(100)
  hay_teenagers               Boolean?   @default(false)
  cantidad_teenagers          Int?       @default(0)
  teenagers_tipo_comida       String?    @db.VarChar(50)
  teenagers_tipo_pasta        String?    @db.VarChar(50)
  contratos                   contratos? @relation(fields: [contrato_id], references: [id])

  @@index([tipo_decoracion], map: "idx_ajustes_tipo_decoracion")
}
model fotos_servicios {
  id             Int       @id @default(autoincrement())
  tipo_servicio  String    @db.VarChar(50) // torta, decoracion, menu, bar
  nombre         String    @db.VarChar(255)
  nombre_archivo String?   @db.VarChar(255)
  descripcion    String?
  url_imagen     String    @db.VarChar(500)
  orden          Int?      @default(0)
  activo         Boolean?  @default(true)
  fecha_creacion DateTime? @default(now()) @db.Timestamp(6)

  @@index([tipo_servicio], map: "idx_fotos_tipo_servicio")
  @@index([activo], map: "idx_fotos_activo")
}

model gerentes {
  id                  Int       @id @default(autoincrement())
  nombre_completo     String    @db.VarChar(255)
  codigo_gerente      String    @unique @db.VarChar(50)
  email               String    @unique @db.VarChar(255)
  telefono            String?   @db.VarChar(20)
  password_hash       String    @db.VarChar(255)
  activo              Boolean?  @default(true)
  fecha_registro      DateTime? @default(now()) @db.Timestamp(6)
  fecha_actualizacion DateTime? @default(now()) @db.Timestamp(6)
}

model managers {
  id                  Int       @id @default(autoincrement())
  nombre_completo     String    @db.VarChar(255)
  codigo_manager      String    @unique @db.VarChar(50)
  email               String    @unique @db.VarChar(255)
  telefono            String?   @db.VarChar(20)
  password_hash       String    @db.VarChar(255)
  activo              Boolean?  @default(true)
  fecha_registro      DateTime? @default(now()) @db.Timestamp(6)
  fecha_actualizacion DateTime? @default(now()) @db.Timestamp(6)

  // Relaciones
  checklist_servicios_externos checklist_servicios_externos[]
}

model checklist_servicios_externos {
  id                  Int       @id @default(autoincrement())
  contrato_id         Int
  servicio_tipo       String    @db.VarChar(50) // limosina, hora_loca, animador, chef
  contacto_realizado  Boolean?  @default(false)
  fecha_contacto      DateTime? @db.Timestamp(6)
  notas               String?
  estado              String?   @default("pendiente") @db.VarChar(50) // pendiente, en_proceso, completado
  manager_id          Int?
  fecha_creacion      DateTime? @default(now()) @db.Timestamp(6)
  fecha_actualizacion DateTime? @default(now()) @db.Timestamp(6)

  // Relaciones
  contratos contratos? @relation(fields: [contrato_id], references: [id], onDelete: Cascade)
  managers  managers?  @relation(fields: [manager_id], references: [id])

  @@unique([contrato_id, servicio_tipo])
  @@index([contrato_id], map: "idx_checklist_contrato")
  @@index([estado], map: "idx_checklist_estado")
  @@index([manager_id], map: "idx_checklist_manager")
}


  id                  Int       @id @default(autoincrement())
  contrato_id         Int
  servicio_tipo       String    @db.VarChar(50) // limosina, hora_loca, animador, chef
  contacto_realizado  Boolean?  @default(false)
  fecha_contacto      DateTime? @db.Timestamp(6)
  notas               String?
  estado              String?   @default("pendiente") @db.VarChar(50) // pendiente, en_proceso, completado
  manager_id          Int?
  fecha_creacion      DateTime? @default(now()) @db.Timestamp(6)
  fecha_actualizacion DateTime? @default(now()) @db.Timestamp(6)

  // Relaciones
  contratos contratos? @relation(fields: [contrato_id], references: [id], onDelete: Cascade)
  managers  managers?  @relation(fields: [manager_id], references: [id])

  @@unique([contrato_id, servicio_tipo])
  @@index([contrato_id], map: "idx_checklist_contrato")
  @@index([estado], map: "idx_checklist_estado")
  @@index([manager_id], map: "idx_checklist_manager")
}


  id                  Int       @id @default(autoincrement())
  contrato_id         Int
  servicio_tipo       String    @db.VarChar(50) // limosina, hora_loca, animador, chef
  contacto_realizado  Boolean?  @default(false)
  fecha_contacto      DateTime? @db.Timestamp(6)
  notas               String?
  estado              String?   @default("pendiente") @db.VarChar(50) // pendiente, en_proceso, completado
  manager_id          Int?
  fecha_creacion      DateTime? @default(now()) @db.Timestamp(6)
  fecha_actualizacion DateTime? @default(now()) @db.Timestamp(6)

  // Relaciones
  contratos contratos? @relation(fields: [contrato_id], references: [id], onDelete: Cascade)
  managers  managers?  @relation(fields: [manager_id], references: [id])

  @@unique([contrato_id, servicio_tipo])
  @@index([contrato_id], map: "idx_checklist_contrato")
  @@index([estado], map: "idx_checklist_estado")
  @@index([manager_id], map: "idx_checklist_manager")
}

